%h2 Oak Knoll
%a(href="/admin/EnrollFormKnoll/create")
  %h3 + Add new
:php
  $this->widget('bootstrap.widgets.TbExtendedGridView', [
    'type'         => 'striped bordered condensed',
    'htmlOptions'  => ['class' => 'studentManagement'],
    'dataProvider' => $enrollKnoll->search(),

    'filter'       => $enrollKnoll,
    'columns'=> [
      [
        'header' => 'Student name',
        'name'   => 'student_name',
        'value'  => '$data->student_name',
      ] ,
      [
        'header' => 'Grade',
        'name'   => 'grade',
        'value'  => '$data->grade',
      ] ,
      [
        'header' => 'Parent name',
        'name'   => 'parent_name',
        'value'  => '$data->parent_name',
      ] ,
      [
        'header' => 'Address',
        'name'   => 'address',
        'value'  => '$data->address',
      ] ,
      [
        'header' => 'Parent email',
        'name'   => 'parent_email',
        'value'  => '$data->parent_email',
      ] ,
      [
        'header' => 'Parent phone',
        'name'   => 'parent_phone',
        'value'  => '$data->parent_phone',
      ] ,
      [
        'header' => 'Food alergies',
        'name'   => 'food_alergies',
        'value'  => '$data->food_alergies',
      ] ,
      [
        'header' => 'Additional comments',
        'name'   => 'additional_comments',
        'value'  => '$data->additional_comments',
      ] ,
      [
        'header' => 'Payment',
        'name'   => 'payment_status',
        'value'  => '$data->order->payment_status',
        'filter' => ['pending'=>'pending', 'completed'=>'completed', 'canceled'=>'canceled', 'failed'=>'failed', 'completed_by_check'=>'completed_by_check' ]
      ] ,
      [
        'header' => 'Submit date',
        'name'   => 'created',
        'type' => 'raw',
        'value'  => function($data){
          return date('m/d/Y', strtotime($data->created));
          },
      ] ,
      [
        'class'       => 'bootstrap.widgets.TbButtonColumn',
        'template'    => '{update}{delete}',
        'buttons'     => [
          'update'=> [
            'label'=>'Update',       
            'url'  =>'Yii::app()->controller->createUrl("/admin/enrollFormKnoll/update/id/" . $data->enroll_form_id)'
          ],
          'delete'=> [
            'label'=>'Delete',       
            'url'  =>'Yii::app()->controller->createUrl("/admin/enrollFormKnoll/delete/id/" . $data->enroll_form_id)'
          ],
        ],
      ],
 
    ]
  ]);

%h2 Hillview
:php
  $this->widget('bootstrap.widgets.TbExtendedGridView', [
    'type'         => 'striped bordered condensed',
    'htmlOptions'  => ['class' => 'studentManagement'],
    'dataProvider' => $enrollHillview->selectAll(),
    'columns'=> [
      [
        'header' => 'Student name',
        'name'   => 'student_name',
        'value'  => '$data->student_name',
      ] ,
      [
        'header' => 'Grade',
        'name'   => 'grade',
        'value'  => '$data->grade',
      ] ,
      [
        'header' => 'Class day',
        'name'   => 'class_day',
        'value'  => '$data->class_day',
      ] ,
      [
        'header' => 'Parent name',
        'name'   => 'parent_name',
        'value'  => '$data->parent_name',
      ] ,
      [
        'header' => 'Address',
        'name'   => 'address',
        'value'  => '$data->address',
      ] ,
      [
        'header' => 'Parent email',
        'name'   => 'parent_email',
        'value'  => '$data->parent_email',
      ] ,
      [
        'header' => 'Parent phone',
        'name'   => 'parent_phone',
        'value'  => '$data->parent_phone',
      ] ,
      [
        'header' => 'Food alergies',
        'name'   => 'food_alergies',
        'value'  => '$data->food_alergies',
      ] ,
      [
        'header' => 'Payment',
        'name'   => 'food_alergies',
        'value'  => '$data->order->payment_status',
      ] ,
      [
        'header' => 'Submit date',
        'name'   => 'created',
        'type' => 'raw',
        'value'  => function($data){
          return date('m/d/Y', strtotime($data->created));
          },
      ] ,
 
    ]
  ]);



%h2 Summer seminars
:php
  $this->widget('bootstrap.widgets.TbExtendedGridView', [
    'type'         => 'striped bordered condensed',
    'htmlOptions'  => ['class' => 'studentManagement'],
    'dataProvider' => $enrollSummer->selectAll(),
    'columns'=> [
      [
        'header' => 'Student name',
        'name'   => 'student_name',
        'value'  => '$data->student_name',
      ] ,
      [
        'header' => 'Student cell phone',
        'name'   => 'student_cell_phone',
        'value'  => '$data->student_cell_phone',
      ] ,
      [
        'header' => 'Student email',
        'name'   => 'student_email',
        'value'  => '$data->student_email',
      ] ,
      [
        'header' => 'Submit date',
        'name'   => 'submit_date',
        'value'  => '$data->submit_date',
      ] ,
      [
        'header' => 'Courses',
        'name'   => 'food_alergies',
        'type'   => 'raw',
        'value'  => function($data){
            $courses = '';
            foreach ($data->order->studentSeminars as $studentSeminar) {
              $courses .= $studentSeminar->seminar->title . '<br/>';
              $courses .= $studentSeminar->grade->title . '<br/>';
              $courses .= $studentSeminar->timeSlot . '<br/>';
              $courses .= $studentSeminar->datePeriod . '<br/><br/>';
            }
            return $courses;
            },
      ] ,
      [
        'header' => 'Payment',
        'name'   => 'food_alergies',
        'value'  => '$data->order->payment_status',
      ] ,
      [
        'class'       => 'bootstrap.widgets.TbButtonColumn',
        'template'    => '{update}{delete}',
        'buttons'     => [
          'update'=> [
            'label'=>'Update',
            'url'  =>'Yii::app()->controller->createUrl("/admin/orders/update/id/" . $data->enroll_form_id)'
          ],
          'delete'=> [
            'label'=>'Delete',
            'url'  =>'Yii::app()->controller->createUrl("/admin/orders/delete/id/" . $data->order->id)'
          ],
        ],
      ],
    ]
  ]);